% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/BetterVis_Pie_Multi.R
\name{BetterVis_Pie_Multi}
\alias{BetterVis_Pie_Multi}
\title{Create a Scatter Plot with Pie Chart Glyphs}
\usage{
BetterVis_Pie_Multi(
  data_in,
  data_out = NULL,
  facet_var,
  x_var,
  y_var,
  fill_var1,
  pie_var1,
  fill_var2 = NULL,
  pie_var2 = NULL,
  in_color = NULL,
  out_color = NULL,
  outer_pie_width = 3,
  inner_pie_width = 2.5,
  circle_radius = 0.1,
  draw_outer_pie = TRUE
)
}
\arguments{
\item{data_in}{A data frame for the inner pie chart.}

\item{data_out}{(Optional) A data frame for the outer pie chart.}

\item{facet_var}{A character string for the column name used to group pie charts. In the `data_in` and `data_out` data frames, each unique value in this column corresponds to one pie glyph on the plot.}

\item{x_var, y_var}{Character strings for the column names that define the x and y coordinates of each pie chart glyph.}

\item{fill_var1, pie_var1}{Character strings for the column names in `data_in` that define the inner pie's slice colors and proportions, respectively.}

\item{fill_var2, pie_var2}{(Optional) Character strings for the column names in `data_out` that define the outer pie's slice colors and proportions.}

\item{in_color, out_color}{(Optional) Vectors of colors for the inner and outer pies.}

\item{outer_pie_width, inner_pie_width}{Numeric. The radius/width of the outer and inner pie charts.}

\item{circle_radius}{Numeric. The radius of the central circle.}

\item{draw_outer_pie}{Logical. If `TRUE`, the outer pie chart is drawn. Requires `data_out`.}
}
\value{
A `ggplot` object.
}
\description{
This function generates a scatter plot where each point is rendered as a single
or a concentric pie chart. It uses the `jjPlot` package for the pie chart
geometry and `ggnewscale` to handle multiple fill scales.
}
\examples{
if (requireNamespace("jjPlot", quietly = TRUE) && requireNamespace("ggnewscale", quietly = TRUE)) {
library(tidyverse)
library(ggtext)
library(dplyr)
library(ggplot2)
library(scales)
library(MetBrewer)

  # Load example data
  data("BetterVis_Pie_Multi_example_in", package = "BetterVis")
  data("BetterVis_Pie_Multi_example_out", package = "BetterVis")

  # Define color palettes
  color1 <- c("#FED439B2", "#709AE1B2", "#8A9197B2", "#D2AF81B2",
              "#FD7446B2", "#D5E4A2B2", "#197EC0B2", "#46732EB2",
              "#71D0F5B2", "#C6CDF7", "#91331FB2", "#1A9993B2",
              "#FD8CC1B2", "#FAD510", "#0A9F9D", "#3B9AB2",
              "#FF0000", "#969BC7", "#B695BC", "#6F9954")
  color2 <- c("#FBA72A", "#969BC7")

  # Generate the plot
  BetterVis_Pie_Multi(
    data_in = BetterVis_Pie_Multi_example_in,
    data_out = BetterVis_Pie_Multi_example_out,
    facet_var = "Habitat",
    x_var = "type",
    y_var = "Group",
    fill_var1 = "Phylum",
    pie_var1 = "Proportion",
    fill_var2 = "name",
    pie_var2 = "value",
    in_color = color1,
    out_color = color2,
    draw_outer_pie = TRUE
  )
}
}
